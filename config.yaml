# Bib-Check 配置文件

# 数据源配置
sources:
  priority:
    - semantic-scholar
    - dblp
    - crossref
    - arxiv
    - pubmed
  
  # Semantic Scholar API 配置
  semantic_scholar:
    base_url: "https://api.semanticscholar.org/graph/v1"
    timeout: 10
    retry: 3
    rate_limit: 100  # 每分钟请求数
  
  # DBLP API 配置
  dblp:
    base_url: "https://dblp.org/search/publ/api"
    timeout: 10
    retry: 3
    rate_limit: 60

  # Crossref API 配置
  crossref:
    base_url: "https://api.crossref.org"
    timeout: 10
    retry: 3
    rate_limit: 60
    mailto: ""

  # arXiv API 配置
  arxiv:
    base_url: "http://export.arxiv.org/api/query"
    timeout: 10
    retry: 3
    rate_limit: 30

  # PubMed API 配置
  pubmed:
    base_url: "https://eutils.ncbi.nlm.nih.gov/entrez/eutils"
    timeout: 10
    retry: 3
    rate_limit: 60
    email: ""
    tool: "bib-check"

# 链接检查配置
link_check:
  timeout: 10
  retry: 2
  user_agent: "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36"
  check_methods:
    - HEAD
    - GET

# 作者截断配置
author_truncation:
  max_authors: 3
  suffix: "et. al"

# 输出配置
output:
  backup: true  # 修改前备份原文件
  backup_suffix: ".bak"
  report_suffix: ".report.json"
  report_md_suffix: ".report.md"
  html_report_suffix: ".report.html"
  report_csv_suffix: ".report.csv"
  report_tex_suffix: ".report.tex"
  report_pdf_suffix: ".report.pdf"
  summary_suffix: ".summary.json"
  summary_md_suffix: ".summary.md"

# 自动修复配置
auto_fix:
  fix_doi: true
  fix_url: true
  fix_pages: true
  fix_year: true
  fix_whitespace: true

# 缓存配置
cache:
  enabled: false
  dir: ".cache/bib-check"
  ttl: 86400
  max_size_mb: 200

# 并发配置
concurrency:
  max_workers: 4

# BibLaTeX 校验配置
validation:
  check_missing_fields: true  # 检查缺失的必需字段
  check_author_format: true   # 检查作者格式
  check_journal_abbrev: true  # 检查期刊缩写
  check_unique_ids: true      # 检查 ID 唯一性
  check_type_consistency: true # 检查条目类型一致性
  check_doi_format: true
  check_isbn_issn_format: true
  check_year_range: true
  check_pages_format: true
  check_url_format: true
  year_min: 1900
  year_max: 2100
  
  # 字段别名映射（BibTeX -> BibLaTeX）
  field_aliases:
    school: institution
    address: location
  
  # 必需字段定义（可自定义扩展）
  # 格式: entry_type: [field1, field2, field3/field4]
  # field3/field4 表示二选一
  required_fields:
    article: ["author", "title", "journaltitle/journal", "year/date"]
    inproceedings: ["author", "title", "booktitle", "year/date"]
    book: ["author", "title", "year/date"]
    # 更多类型在代码中有默认定义